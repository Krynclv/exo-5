- name: DÃ©ploiement ToDoApp sur EC2
  hosts: aws
  become: true
  tasks:
    - name: Installer nginx
      yum:
        name: nginx
        state: present
        update_cache: yes

    - name: DÃ©ployer la page
      copy:
        dest: /usr/share/nginx/html/index.html
        owner: root
        group: root
        mode: '0644'
        content: |
          <!doctype html>
          <html><head><meta charset="utf-8"><title>TodoApp AWS</title></head>
          <body><h1>DÃ©ployÃ© via GitHub Actions + Ansible ðŸš€</h1></body></html>

    - name: Activer et dÃ©marrer nginx
      systemd:
        name: nginx
        state: started
        enabled: true
